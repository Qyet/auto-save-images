# Auto-save-images

**作者:** Qyet  
**版本:** 0.0.1  
**兼容WordPress版本:** 6.8.3+

## 插件介绍

Auto-save-images是一个轻量级WordPress插件，允许用户在编辑文章或页面时选择是否将远程图片保存到本地媒体库。当用户保存或发布内容时，插件会自动检测内容中的远程图片，并根据用户的选择决定是否将其保存到本地。

## 功能特点

- 在文章/页面编辑界面侧边栏中添加"是否保存远程图片"选项
- 支持在保存或发布内容时自动检测并保存远程图片
- 可配置的保存选项，用户可以针对每篇文章独立设置
- 保持原图片的格式和质量
- 保存完成后自动更新文章中的图片链接指向本地媒体库
- 轻量级设计，不影响网站性能

## 安装方法

### 方法一：通过WordPress插件目录安装
1. 登录WordPress管理后台
2. 进入"插件" > "添加新"
3. 搜索"Auto-save-images"
4. 点击"安装现在"
5. 安装完成后点击"启用"

### 方法二：手动上传安装
1. 下载插件的ZIP文件
2. 登录WordPress管理后台
3. 进入"插件" > "添加新"
4. 点击"上传插件"
5. 选择下载的ZIP文件并点击"立即安装"
6. 安装完成后点击"启用"

### 方法三：通过FTP安装
1. 解压插件的ZIP文件，得到`auto-save-images`目录
2. 使用FTP客户端连接到您的网站
3. 将`auto-save-images`目录上传到`/wp-content/plugins/`目录
4. 登录WordPress管理后台，进入"插件"页面
5. 找到"Auto-save-images"并点击"启用"

## 使用方法

1. 创建或编辑一篇文章或页面
2. 在右侧侧边栏中找到"是否保存远程图片"选项
3. 根据需要选择"是"或"否"
   - 选择"是"：保存或发布时，文章中的远程图片将被保存到本地媒体库
   - 选择"否"：保存或发布时，不会保存任何远程图片
4. 正常保存或发布文章

## 技术说明

插件使用WordPress的以下核心功能：

- `add_meta_box()` - 添加文章编辑界面的元数据框
- `save_post`钩子 - 在保存文章时处理图片
- `media_sideload_image()` - 将远程图片保存到媒体库
- WordPress元数据API - 存储和检索用户的保存选项

## 常见问题

### Q: 保存远程图片需要什么权限？
A: 需要WordPress管理员或具有编辑文章权限的用户。

### Q: 插件是否会覆盖媒体库中已存在的图片？
A: WordPress的`media_sideload_image()`函数会检查文件是否存在，并在必要时自动重命名文件。

### Q: 插件支持哪些图片格式？
A: 支持所有WordPress媒体库支持的图片格式，如JPG、PNG、GIF等。

### Q: 插件是否会影响网站性能？
A: 插件仅在保存或发布文章时运行，不会影响网站前端性能。对于包含大量远程图片的文章，保存过程可能会稍微延长，这是正常现象。

## 版本历史

### 0.0.1 (初始版本)
- 基本功能实现：侧边栏选项和远程图片保存

## 贡献指南

欢迎贡献代码或报告问题。请在GitHub仓库提交拉取请求或问题报告。

## 许可证

本插件采用GNU通用公共许可证v2或更高版本(GPL-2.0+)授权。

## 联系信息

如有任何问题或建议，请联系作者：Qyet
